"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_thirdweb-dev_wallets_evm_connectors_wallet-connect_dist_thirdweb-dev-wallets-evm-2efe37"],{

/***/ "./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: function() { return /* binding */ getValidPublicRPCUrl; },\n/* harmony export */   i: function() { return /* binding */ isTwUrl; }\n/* harmony export */ });\n/* harmony import */ var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @thirdweb-dev/chains */ \"./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js\");\n\n\nfunction isTwUrl(url) {\n  const host = new URL(url).hostname;\n  return host.endsWith(\".thirdweb.com\") || host === \"localhost\" || host === \"0.0.0.0\";\n}\nfunction getValidPublicRPCUrl(chain) {\n  return (0,_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_0__.getValidChainRPCs)(chain).map(rpc => {\n    try {\n      const url = new URL(rpc);\n      // remove client id from url\n      if (url.hostname.endsWith(\".thirdweb.com\")) {\n        url.pathname = \"\";\n        url.search = \"\";\n      }\n      return url.toString();\n    } catch (e) {\n      return rpc;\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2Rpc3QvdXJsLWJjODhiMmI2LmJyb3dzZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RDs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0B0aGlyZHdlYi1kZXYvd2FsbGV0cy9kaXN0L3VybC1iYzg4YjJiNi5icm93c2VyLmVzbS5qcz85YmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFZhbGlkQ2hhaW5SUENzIH0gZnJvbSAnQHRoaXJkd2ViLWRldi9jaGFpbnMnO1xuXG5mdW5jdGlvbiBpc1R3VXJsKHVybCkge1xuICBjb25zdCBob3N0ID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lO1xuICByZXR1cm4gaG9zdC5lbmRzV2l0aChcIi50aGlyZHdlYi5jb21cIikgfHwgaG9zdCA9PT0gXCJsb2NhbGhvc3RcIiB8fCBob3N0ID09PSBcIjAuMC4wLjBcIjtcbn1cbmZ1bmN0aW9uIGdldFZhbGlkUHVibGljUlBDVXJsKGNoYWluKSB7XG4gIHJldHVybiBnZXRWYWxpZENoYWluUlBDcyhjaGFpbikubWFwKHJwYyA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocnBjKTtcbiAgICAgIC8vIHJlbW92ZSBjbGllbnQgaWQgZnJvbSB1cmxcbiAgICAgIGlmICh1cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIudGhpcmR3ZWIuY29tXCIpKSB7XG4gICAgICAgIHVybC5wYXRobmFtZSA9IFwiXCI7XG4gICAgICAgIHVybC5zZWFyY2ggPSBcIlwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBycGM7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgZ2V0VmFsaWRQdWJsaWNSUENVcmwgYXMgZywgaXNUd1VybCBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js\n"));

/***/ }),

/***/ "./node_modules/@thirdweb-dev/wallets/evm/connectors/wallet-connect/dist/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/evm/connectors/wallet-connect/dist/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.js ***!
  \*************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WalletConnectConnector: function() { return /* binding */ WalletConnectConnector; }\n/* harmony export */ });\n/* harmony import */ var _dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../dist/classPrivateMethodGet-ea199cc3.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/classPrivateMethodGet-ea199cc3.browser.esm.js\");\n/* harmony import */ var _dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/classPrivateFieldSet-a5db7c83.browser.esm.js\");\n/* harmony import */ var _dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../dist/defineProperty-c8ecdc07.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/defineProperty-c8ecdc07.browser.esm.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ethers */ \"./node_modules/ethers/lib.esm/index.js\");\n/* harmony import */ var _dist_walletIds_006a648a_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../dist/walletIds-006a648a.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/walletIds-006a648a.browser.esm.js\");\n/* harmony import */ var _dist_url_bc88b2b6_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../dist/url-bc88b2b6.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js\");\n/* harmony import */ var _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../dist/WagmiConnector-2f14002d.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js\");\n/* harmony import */ var _dist_errors_3055a99c_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../dist/errors-3055a99c.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/errors-3055a99c.browser.esm.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ \"./node_modules/eventemitter3/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nconst chainsToRequest = new Set([1, 137, 10, 42161, 56]);\nconst NAMESPACE = \"eip155\";\nconst REQUESTED_CHAINS_KEY = \"wagmi.requestedChains\";\nconst ADD_ETH_CHAIN_METHOD = \"wallet_addEthereumChain\";\nconst LAST_USED_CHAIN_ID = \"last-used-chain-id\";\nvar _provider = /*#__PURE__*/new WeakMap();\nvar _initProviderPromise = /*#__PURE__*/new WeakMap();\nvar _storage = /*#__PURE__*/new WeakMap();\nvar _createProvider = /*#__PURE__*/new WeakSet();\nvar _initProvider = /*#__PURE__*/new WeakSet();\nvar _isChainsStale = /*#__PURE__*/new WeakSet();\nvar _removeListeners = /*#__PURE__*/new WeakSet();\nvar _setRequestedChainsIds = /*#__PURE__*/new WeakSet();\nvar _getRequestedChainsIds = /*#__PURE__*/new WeakSet();\nvar _getNamespaceChainsIds = /*#__PURE__*/new WeakSet();\nvar _getNamespaceMethods = /*#__PURE__*/new WeakSet();\nclass WalletConnectConnector extends _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.W {\n  constructor(config) {\n    super({\n      ...config,\n      options: {\n        isNewChainsStale: true,\n        ...config.options\n      }\n    });\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _getNamespaceMethods);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _getNamespaceChainsIds);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _getRequestedChainsIds);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _setRequestedChainsIds);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _removeListeners);\n    /**\n     * Checks if the target chains match the chains that were\n     * initially requested by the connector for the WalletConnect session.\n     * If there is a mismatch, this means that the chains on the connector\n     * are considered stale, and need to be revalidated at a later point (via\n     * connection).\n     *\n     * There may be a scenario where a dapp adds a chain to the\n     * connector later on, however, this chain will not have been approved or rejected\n     * by the wallet. In this case, the chain is considered stale.\n     *\n     * There are exceptions however:\n     * -  If the wallet supports dynamic chain addition via `eth_addEthereumChain`,\n     *    then the chain is not considered stale.\n     * -  If the `isNewChainsStale` flag is falsy on the connector, then the chain is\n     *    not considered stale.\n     *\n     * For the above cases, chain validation occurs dynamically when the user\n     * attempts to switch chain.\n     *\n     * Also check that dapp supports at least 1 chain from previously approved session.\n     */\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _isChainsStale);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _initProvider);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _createProvider);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"id\", _dist_walletIds_006a648a_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.w.walletConnect);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"name\", \"WalletConnect\");\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"ready\", true);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _provider, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _initProviderPromise, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _storage, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onAccountsChanged\", accounts => {\n      if (accounts.length === 0) {\n        this.emit(\"disconnect\");\n      } else {\n        if (accounts[0]) {\n          this.emit(\"change\", {\n            account: ethers__WEBPACK_IMPORTED_MODULE_6__.utils.getAddress(accounts[0])\n          });\n        }\n      }\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onChainChanged\", async chainId => {\n      const id = Number(chainId);\n      const unsupported = this.isChainUnsupported(id);\n      await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).setItem(LAST_USED_CHAIN_ID, String(chainId));\n      this.emit(\"change\", {\n        chain: {\n          id,\n          unsupported\n        }\n      });\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onDisconnect\", async () => {\n      await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, []);\n      await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).removeItem(LAST_USED_CHAIN_ID);\n      this.emit(\"disconnect\");\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onDisplayUri\", uri => {\n      this.emit(\"message\", {\n        type: \"display_uri\",\n        data: uri\n      });\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onConnect\", () => {\n      this.emit(\"connect\", {\n        provider: (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)\n      });\n    });\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _storage, config.options.storage);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _createProvider, _createProvider2).call(this);\n    this.filteredChains = this.chains.length > 50 ? this.chains.filter(c => {\n      return chainsToRequest.has(c.chainId);\n    }) : this.chains;\n  }\n  async connect() {\n    let {\n      chainId: chainIdP,\n      pairingTopic\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    try {\n      let targetChainId = chainIdP;\n      if (!targetChainId) {\n        const lastUsedChainIdStr = await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).getItem(LAST_USED_CHAIN_ID);\n        const lastUsedChainId = lastUsedChainIdStr ? parseInt(lastUsedChainIdStr) : undefined;\n        if (lastUsedChainId && !this.isChainUnsupported(lastUsedChainId)) {\n          targetChainId = lastUsedChainId;\n        } else {\n          targetChainId = this.filteredChains[0]?.chainId;\n        }\n      }\n      if (!targetChainId) {\n        throw new Error(\"No chains found on connector.\");\n      }\n      const provider = await this.getProvider();\n      this.setupListeners();\n      const isChainsStale = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _isChainsStale, _isChainsStale2).call(this);\n\n      // If there is an active session with stale chains, disconnect the current session.\n      if (provider.session && isChainsStale) {\n        await provider.disconnect();\n      }\n\n      // If there no active session, or the chains are stale, connect.\n      if (!provider.session || isChainsStale) {\n        const optionalChains = this.filteredChains.filter(chain => chain.chainId !== targetChainId).map(optionalChain => optionalChain.chainId);\n        this.emit(\"message\", {\n          type: \"connecting\"\n        });\n        await provider.connect({\n          pairingTopic,\n          chains: [targetChainId],\n          optionalChains: optionalChains.length > 0 ? optionalChains : [targetChainId]\n        });\n        await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, this.filteredChains.map(_ref => {\n          let {\n            chainId\n          } = _ref;\n          return chainId;\n        }));\n      }\n\n      // If session exists and chains are authorized, enable provider for required chain\n      const accounts = await provider.enable();\n      if (!accounts[0]) {\n        throw new Error(\"No accounts found on provider.\");\n      }\n      const account = ethers__WEBPACK_IMPORTED_MODULE_6__.utils.getAddress(accounts[0]);\n      const id = await this.getChainId();\n      const unsupported = this.isChainUnsupported(id);\n      return {\n        account,\n        chain: {\n          id,\n          unsupported\n        },\n        provider: new ethers__WEBPACK_IMPORTED_MODULE_6__.providers.Web3Provider(provider)\n      };\n    } catch (error) {\n      if (/user rejected/i.test(error?.message)) {\n        throw new _dist_errors_3055a99c_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(error);\n      }\n      throw error;\n    }\n  }\n  async disconnect() {\n    const cleanup = () => {\n      if (typeof localStorage === \"undefined\") {\n        return;\n      }\n      for (const key in localStorage) {\n        if (key.startsWith(\"wc@2\")) {\n          localStorage.removeItem(key);\n        }\n      }\n    };\n    cleanup();\n    const provider = await this.getProvider();\n    const disconnectProvider = async () => {\n      try {\n        await provider.disconnect();\n      } catch (error) {\n        if (!/No matching key/i.test(error.message)) {\n          throw error;\n        }\n      } finally {\n        (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _removeListeners, _removeListeners2).call(this);\n        await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, []);\n        cleanup();\n      }\n    };\n    disconnectProvider();\n  }\n  async getAccount() {\n    const {\n      accounts\n    } = await this.getProvider();\n    if (!accounts[0]) {\n      throw new Error(\"No accounts found on provider.\");\n    }\n    return ethers__WEBPACK_IMPORTED_MODULE_6__.utils.getAddress(accounts[0]);\n  }\n  async getChainId() {\n    const {\n      chainId\n    } = await this.getProvider();\n    return chainId;\n  }\n  async getProvider() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n      await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _createProvider, _createProvider2).call(this);\n    }\n    if (chainId) {\n      await this.switchChain(chainId);\n    }\n    if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n      throw new Error(\"No provider found.\");\n    }\n    return (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider);\n  }\n  async getSigner() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const [provider, account] = await Promise.all([this.getProvider({\n      chainId\n    }), this.getAccount()]);\n    return new ethers__WEBPACK_IMPORTED_MODULE_6__.providers.Web3Provider(provider, chainId).getSigner(account);\n  }\n  async isAuthorized() {\n    try {\n      const [account, provider] = await Promise.all([this.getAccount(), this.getProvider()]);\n      const isChainsStale = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _isChainsStale, _isChainsStale2).call(this);\n\n      // If an account does not exist on the session, then the connector is unauthorized.\n      if (!account) {\n        return false;\n      }\n\n      // If the chains are stale on the session, then the connector is unauthorized.\n      if (isChainsStale && provider.session) {\n        try {\n          await provider.disconnect();\n        } catch {} // eslint-disable-line no-empty\n        return false;\n      }\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  async switchChain(chainId) {\n    const chain = this.chains.find(chain_ => chain_.chainId === chainId);\n    if (!chain) {\n      throw new _dist_errors_3055a99c_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.S(`Chain with ID: ${chainId}, not found on connector.`);\n    }\n    try {\n      const provider = await this.getProvider();\n      const namespaceChains = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceChainsIds, _getNamespaceChainsIds2).call(this);\n      const namespaceMethods = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceMethods, _getNamespaceMethods2).call(this);\n      const isChainApproved = namespaceChains.includes(chainId);\n      if (!isChainApproved && namespaceMethods.includes(ADD_ETH_CHAIN_METHOD)) {\n        const firstExplorer = chain.explorers && chain.explorers[0];\n        const blockExplorerUrls = firstExplorer ? {\n          blockExplorerUrls: [firstExplorer.url]\n        } : {};\n        await provider.request({\n          method: ADD_ETH_CHAIN_METHOD,\n          params: [{\n            chainId: ethers__WEBPACK_IMPORTED_MODULE_6__.utils.hexValue(chain.chainId),\n            chainName: chain.name,\n            nativeCurrency: chain.nativeCurrency,\n            rpcUrls: (0,_dist_url_bc88b2b6_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.g)(chain),\n            // no clientId on purpose\n            ...blockExplorerUrls\n          }]\n        });\n        const requestedChains = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getRequestedChainsIds, _getRequestedChainsIds2).call(this);\n        requestedChains.push(chainId);\n        await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, requestedChains);\n      }\n      await provider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: ethers__WEBPACK_IMPORTED_MODULE_6__.utils.hexValue(chainId)\n        }]\n      });\n      return chain;\n    } catch (error) {\n      const message = typeof error === \"string\" ? error : error?.message;\n      if (/user rejected request/i.test(message)) {\n        throw new _dist_errors_3055a99c_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(error);\n      }\n      throw new _dist_errors_3055a99c_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.S(error);\n    }\n  }\n  async setupListeners() {\n    if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n      return;\n    }\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _removeListeners, _removeListeners2).call(this);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"accountsChanged\", this.onAccountsChanged);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"chainChanged\", this.onChainChanged);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"disconnect\", this.onDisconnect);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"session_delete\", this.onDisconnect);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"display_uri\", this.onDisplayUri);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"connect\", this.onConnect);\n  }\n}\nasync function _createProvider2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _initProviderPromise) && \"object\" !== \"undefined\") {\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _initProviderPromise, (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _initProvider, _initProvider2).call(this));\n  }\n  return (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _initProviderPromise);\n}\nasync function _initProvider2() {\n  const {\n    default: EthereumProvider,\n    OPTIONAL_EVENTS,\n    OPTIONAL_METHODS\n  } = await __webpack_require__.e(/*! import() */ \"node_modules_walletconnect_ethereum-provider_dist_index_es_js\").then(__webpack_require__.bind(__webpack_require__, /*! @walletconnect/ethereum-provider */ \"./node_modules/@walletconnect/ethereum-provider/dist/index.es.js\"));\n  const [defaultChain, ...optionalChains] = this.filteredChains.map(_ref2 => {\n    let {\n      chainId\n    } = _ref2;\n    return chainId;\n  });\n  if (defaultChain) {\n    // EthereumProvider populates & deduplicates required methods and events internally\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _provider, await EthereumProvider.init({\n      showQrModal: this.options.qrcode !== false,\n      projectId: this.options.projectId,\n      optionalMethods: OPTIONAL_METHODS,\n      optionalEvents: OPTIONAL_EVENTS,\n      chains: [defaultChain],\n      optionalChains: optionalChains,\n      metadata: {\n        name: this.options.dappMetadata.name,\n        description: this.options.dappMetadata.description || \"\",\n        url: this.options.dappMetadata.url,\n        icons: [this.options.dappMetadata.logoUrl || \"\"]\n      },\n      rpcMap: Object.fromEntries(this.filteredChains.map(chain => [chain.chainId, chain.rpc[0] || \"\" // TODO: handle chain.rpc being empty array\n      ])),\n\n      qrModalOptions: this.options.qrModalOptions\n    }));\n  }\n}\nasync function _isChainsStale2() {\n  const namespaceMethods = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceMethods, _getNamespaceMethods2).call(this);\n  if (namespaceMethods.includes(ADD_ETH_CHAIN_METHOD)) {\n    return false;\n  }\n  if (!this.options.isNewChainsStale) {\n    return false;\n  }\n  const requestedChains = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getRequestedChainsIds, _getRequestedChainsIds2).call(this);\n  const connectorChains = this.filteredChains.map(_ref3 => {\n    let {\n      chainId\n    } = _ref3;\n    return chainId;\n  });\n  const namespaceChains = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceChainsIds, _getNamespaceChainsIds2).call(this);\n  if (namespaceChains.length && !namespaceChains.some(id => connectorChains.includes(id))) {\n    return false;\n  }\n  return !connectorChains.every(id => requestedChains.includes(id));\n}\nfunction _removeListeners2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n    return;\n  }\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"accountsChanged\", this.onAccountsChanged);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"chainChanged\", this.onChainChanged);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"disconnect\", this.onDisconnect);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"session_delete\", this.onDisconnect);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"display_uri\", this.onDisplayUri);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"connect\", this.onConnect);\n}\nasync function _setRequestedChainsIds2(chains) {\n  await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).setItem(REQUESTED_CHAINS_KEY, JSON.stringify(chains));\n}\nasync function _getRequestedChainsIds2() {\n  const data = await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).getItem(REQUESTED_CHAINS_KEY);\n  return data ? JSON.parse(data) : [];\n}\nfunction _getNamespaceChainsIds2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n    return [];\n  }\n  const chainIds = (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).session?.namespaces[NAMESPACE]?.chains?.map(chain => parseInt(chain.split(\":\")[1] || \"\"));\n  return chainIds ?? [];\n}\nfunction _getNamespaceMethods2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n    return [];\n  }\n  const methods = (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).session?.namespaces[NAMESPACE]?.methods;\n  return methods ?? [];\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2V2bS9jb25uZWN0b3JzL3dhbGxldC1jb25uZWN0L2Rpc3QvdGhpcmR3ZWItZGV2LXdhbGxldHMtZXZtLWNvbm5lY3RvcnMtd2FsbGV0LWNvbm5lY3QuYnJvd3Nlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUErSTtBQUN5QjtBQUN6RTtBQUNyRDtBQUMwQztBQUNLO0FBQ0s7QUFDeUI7QUFDekY7QUFDUDs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsMkVBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxzRkFBMkI7QUFDL0IsSUFBSSxzRkFBMkI7QUFDL0IsSUFBSSxzRkFBMkI7QUFDL0IsSUFBSSxzRkFBMkI7QUFDL0IsSUFBSSxzRkFBMkI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNGQUEyQjtBQUMvQixJQUFJLHNGQUEyQjtBQUMvQixJQUFJLHNGQUEyQjtBQUMvQixJQUFJLCtFQUFlLGFBQWEsc0VBQVM7QUFDekMsSUFBSSwrRUFBZTtBQUNuQixJQUFJLCtFQUFlO0FBQ25CLElBQUkscUZBQTBCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxxRkFBMEI7QUFDOUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLHFGQUEwQjtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksK0VBQWU7QUFDbkI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EscUJBQXFCLHlDQUFLO0FBQzFCLFdBQVc7QUFDWDtB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QUFDQSxtQkFBbUIscUZBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUZBQXFCO0FBQzVCO0FBQ0E7QUFDQSxrQkFBa0IscUZBQXFCO0FBQ3ZDO0FBQ0E7O0FBRWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AdGhpcmR3ZWItZGV2L3dhbGxldHMvZXZtL2Nvbm5lY3RvcnMvd2FsbGV0LWNvbm5lY3QvZGlzdC90aGlyZHdlYi1kZXYtd2FsbGV0cy1ldm0tY29ubmVjdG9ycy13YWxsZXQtY29ubmVjdC5icm93c2VyLmVzbS5qcz82MjJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF8gYXMgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjLCBhIGFzIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L2NsYXNzUHJpdmF0ZU1ldGhvZEdldC1lYTE5OWNjMy5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBfIGFzIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjLCBiIGFzIF9jbGFzc1ByaXZhdGVGaWVsZEdldCwgYSBhcyBfY2xhc3NQcml2YXRlRmllbGRTZXQgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L2NsYXNzUHJpdmF0ZUZpZWxkU2V0LWE1ZGI3YzgzLmJyb3dzZXIuZXNtLmpzJztcbmltcG9ydCB7IF8gYXMgX2RlZmluZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9kZWZpbmVQcm9wZXJ0eS1jOGVjZGMwNy5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyB1dGlscywgcHJvdmlkZXJzIH0gZnJvbSAnZXRoZXJzJztcbmltcG9ydCB7IHcgYXMgd2FsbGV0SWRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC93YWxsZXRJZHMtMDA2YTY0OGEuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRWYWxpZFB1YmxpY1JQQ1VybCB9IGZyb20gJy4uLy4uLy4uLy4uL2Rpc3QvdXJsLWJjODhiMmI2LmJyb3dzZXIuZXNtLmpzJztcbmltcG9ydCB7IFcgYXMgV2FnbWlDb25uZWN0b3IgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L1dhZ21pQ29ubmVjdG9yLTJmMTQwMDJkLmJyb3dzZXIuZXNtLmpzJztcbmltcG9ydCB7IFUgYXMgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yLCBTIGFzIFN3aXRjaENoYWluRXJyb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L2Vycm9ycy0zMDU1YTk5Yy5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY2hhaW5zJztcbmltcG9ydCAnZXZlbnRlbWl0dGVyMyc7XG5cbmNvbnN0IGNoYWluc1RvUmVxdWVzdCA9IG5ldyBTZXQoWzEsIDEzNywgMTAsIDQyMTYxLCA1Nl0pO1xuY29uc3QgTkFNRVNQQUNFID0gXCJlaXAxNTVcIjtcbmNvbnN0IFJFUVVFU1RFRF9DSEFJTlNfS0VZID0gXCJ3YWdtaS5yZXF1ZXN0ZWRDaGFpbnNcIjtcbmNvbnN0IEFERF9FVEhfQ0hBSU5fTUVUSE9EID0gXCJ3YWxsZXRfYWRkRXRoZXJldW1DaGFpblwiO1xuY29uc3QgTEFTVF9VU0VEX0NIQUlOX0lEID0gXCJsYXN0LXVzZWQtY2hhaW4taWRcIjtcbnZhciBfcHJvdmlkZXIgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtNYXAoKTtcbnZhciBfaW5pdFByb3ZpZGVyUHJvbWlzZSA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xudmFyIF9zdG9yYWdlID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG52YXIgX2NyZWF0ZVByb3ZpZGVyID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG52YXIgX2luaXRQcm92aWRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xudmFyIF9pc0NoYWluc1N0YWxlID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG52YXIgX3JlbW92ZUxpc3RlbmVycyA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xudmFyIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTtcbnZhciBfZ2V0UmVxdWVzdGVkQ2hhaW5zSWRzID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG52YXIgX2dldE5hbWVzcGFjZUNoYWluc0lkcyA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xudmFyIF9nZXROYW1lc3BhY2VNZXRob2RzID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG5jbGFzcyBXYWxsZXRDb25uZWN0Q29ubmVjdG9yIGV4dGVuZHMgV2FnbWlDb25uZWN0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICAuLi5jb25maWcsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGlzTmV3Q2hhaW5zU3RhbGU6IHRydWUsXG4gICAgICAgIC4uLmNvbmZpZy5vcHRpb25zXG4gICAgICB9XG4gICAgfSk7XG4gICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9nZXROYW1lc3BhY2VNZXRob2RzKTtcbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2dldE5hbWVzcGFjZUNoYWluc0lkcyk7XG4gICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9nZXRSZXF1ZXN0ZWRDaGFpbnNJZHMpO1xuICAgIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyh0aGlzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzKTtcbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX3JlbW92ZUxpc3RlbmVycyk7XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSB0YXJnZXQgY2hhaW5zIG1hdGNoIHRoZSBjaGFpbnMgdGhhdCB3ZXJlXG4gICAgICogaW5pdGlhbGx5IHJlcXVlc3RlZCBieSB0aGUgY29ubmVjdG9yIGZvciB0aGUgV2FsbGV0Q29ubmVjdCBzZXNzaW9uLlxuICAgICAqIElmIHRoZXJlIGlzIGEgbWlzbWF0Y2gsIHRoaXMgbWVhbnMgdGhhdCB0aGUgY2hhaW5zIG9uIHRoZSBjb25uZWN0b3JcbiAgICAgKiBhcmUgY29uc2lkZXJlZCBzdGFsZSwgYW5kIG5lZWQgdG8gYmUgcmV2YWxpZGF0ZWQgYXQgYSBsYXRlciBwb2ludCAodmlhXG4gICAgICogY29ubmVjdGlvbikuXG4gICAgICpcbiAgICAgKiBUaGVyZSBtYXkgYmUgYSBzY2VuYXJpbyB3aGVyZSBhIGRhcHAgYWRkcyBhIGNoYWluIHRvIHRoZVxuICAgICAqIGNvbm5lY3RvciBsYXRlciBvbiwgaG93ZXZlciwgdGhpcyBjaGFpbiB3aWxsIG5vdCBoYXZlIGJlZW4gYXBwcm92ZWQgb3IgcmVqZWN0ZWRcbiAgICAgKiBieSB0aGUgd2FsbGV0LiBJbiB0aGlzIGNhc2UsIHRoZSBjaGFpbiBpcyBjb25zaWRlcmVkIHN0YWxlLlxuICAgICAqXG4gICAgICogVGhlcmUgYXJlIGV4Y2VwdGlvbnMgaG93ZXZlcjpcbiAgICAgKiAtICBJZiB0aGUgd2FsbGV0IHN1cHBvcnRzIGR5bmFtaWMgY2hhaW4gYWRkaXRpb24gdmlhIGBldGhfYWRkRXRoZXJldW1DaGFpbmAsXG4gICAgICogICAgdGhlbiB0aGUgY2hhaW4gaXMgbm90IGNvbnNpZGVyZWQgc3RhbGUuXG4gICAgICogLSAgSWYgdGhlIGBpc05ld0NoYWluc1N0YWxlYCBmbGFnIGlzIGZhbHN5IG9uIHRoZSBjb25uZWN0b3IsIHRoZW4gdGhlIGNoYWluIGlzXG4gICAgICogICAgbm90IGNvbnNpZGVyZWQgc3RhbGUuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIGFib3ZlIGNhc2VzLCBjaGFpbiB2YWxpZGF0aW9uIG9jY3VycyBkeW5hbWljYWxseSB3aGVuIHRoZSB1c2VyXG4gICAgICogYXR0ZW1wdHMgdG8gc3dpdGNoIGNoYWluLlxuICAgICAqXG4gICAgICogQWxzbyBjaGVjayB0aGF0IGRhcHAgc3VwcG9ydHMgYXQgbGVhc3QgMSBjaGFpbiBmcm9tIHByZXZpb3VzbHkgYXBwcm92ZWQgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2lzQ2hhaW5zU3RhbGUpO1xuICAgIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyh0aGlzLCBfaW5pdFByb3ZpZGVyKTtcbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2NyZWF0ZVByb3ZpZGVyKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCB3YWxsZXRJZHMud2FsbGV0Q29ubmVjdCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCBcIldhbGxldENvbm5lY3RcIik7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVhZHlcIiwgdHJ1ZSk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX3Byb3ZpZGVyLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfaW5pdFByb3ZpZGVyUHJvbWlzZSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX3N0b3JhZ2UsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uQWNjb3VudHNDaGFuZ2VkXCIsIGFjY291bnRzID0+IHtcbiAgICAgIGlmIChhY2NvdW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KFwiZGlzY29ubmVjdFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhY2NvdW50c1swXSkge1xuICAgICAgICAgIHRoaXMuZW1pdChcImNoYW5nZVwiLCB7XG4gICAgICAgICAgICBhY2NvdW50OiB1dGlscy5nZXRBZGRyZXNzKGFjY291bnRzWzBdKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib25DaGFpbkNoYW5nZWRcIiwgYXN5bmMgY2hhaW5JZCA9PiB7XG4gICAgICBjb25zdCBpZCA9IE51bWJlcihjaGFpbklkKTtcbiAgICAgIGNvbnN0IHVuc3VwcG9ydGVkID0gdGhpcy5pc0NoYWluVW5zdXBwb3J0ZWQoaWQpO1xuICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9zdG9yYWdlKS5zZXRJdGVtKExBU1RfVVNFRF9DSEFJTl9JRCwgU3RyaW5nKGNoYWluSWQpKTtcbiAgICAgIHRoaXMuZW1pdChcImNoYW5nZVwiLCB7XG4gICAgICAgIGNoYWluOiB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdW5zdXBwb3J0ZWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib25EaXNjb25uZWN0XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX3NldFJlcXVlc3RlZENoYWluc0lkcywgX3NldFJlcXVlc3RlZENoYWluc0lkczIpLmNhbGwodGhpcywgW10pO1xuICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9zdG9yYWdlKS5yZW1vdmVJdGVtKExBU1RfVVNFRF9DSEFJTl9JRCk7XG4gICAgICB0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIpO1xuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRGlzcGxheVVyaVwiLCB1cmkgPT4ge1xuICAgICAgdGhpcy5lbWl0KFwibWVzc2FnZVwiLCB7XG4gICAgICAgIHR5cGU6IFwiZGlzcGxheV91cmlcIixcbiAgICAgICAgZGF0YTogdXJpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkNvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KFwiY29ubmVjdFwiLCB7XG4gICAgICAgIHByb3ZpZGVyOiBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9zdG9yYWdlLCBjb25maWcub3B0aW9ucy5zdG9yYWdlKTtcbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9jcmVhdGVQcm92aWRlciwgX2NyZWF0ZVByb3ZpZGVyMikuY2FsbCh0aGlzKTtcbiAgICB0aGlzLmZpbHRlcmVkQ2hhaW5zID0gdGhpcy5jaGFpbnMubGVuZ3RoID4gNTAgPyB0aGlzLmNoYWlucy5maWx0ZXIoYyA9PiB7XG4gICAgICByZXR1cm4gY2hhaW5zVG9SZXF1ZXN0LmhhcyhjLmNoYWluSWQpO1xuICAgIH0pIDogdGhpcy5jaGFpbnM7XG4gIH1cbiAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICBsZXQge1xuICAgICAgY2hhaW5JZDogY2hhaW5JZFAsXG4gICAgICBwYWlyaW5nVG9waWNcbiAgICB9ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB0cnkge1xuICAgICAgbGV0IHRhcmdldENoYWluSWQgPSBjaGFpbklkUDtcbiAgICAgIGlmICghdGFyZ2V0Q2hhaW5JZCkge1xuICAgICAgICBjb25zdCBsYXN0VXNlZENoYWluSWRTdHIgPSBhd2FpdCBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3N0b3JhZ2UpLmdldEl0ZW0oTEFTVF9VU0VEX0NIQUlOX0lEKTtcbiAgICAgICAgY29uc3QgbGFzdFVzZWRDaGFpbklkID0gbGFzdFVzZWRDaGFpbklkU3RyID8gcGFyc2VJbnQobGFzdFVzZWRDaGFpbklkU3RyKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGxhc3RVc2VkQ2hhaW5JZCAmJiAhdGhpcy5pc0NoYWluVW5zdXBwb3J0ZWQobGFzdFVzZWRDaGFpbklkKSkge1xuICAgICAgICAgIHRhcmdldENoYWluSWQgPSBsYXN0VXNlZENoYWluSWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0Q2hhaW5JZCA9IHRoaXMuZmlsdGVyZWRDaGFpbnNbMF0/LmNoYWluSWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGFyZ2V0Q2hhaW5JZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbnMgZm91bmQgb24gY29ubmVjdG9yLlwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgICAgdGhpcy5zZXR1cExpc3RlbmVycygpO1xuICAgICAgY29uc3QgaXNDaGFpbnNTdGFsZSA9IGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2lzQ2hhaW5zU3RhbGUsIF9pc0NoYWluc1N0YWxlMikuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYWN0aXZlIHNlc3Npb24gd2l0aCBzdGFsZSBjaGFpbnMsIGRpc2Nvbm5lY3QgdGhlIGN1cnJlbnQgc2Vzc2lvbi5cbiAgICAgIGlmIChwcm92aWRlci5zZXNzaW9uICYmIGlzQ2hhaW5zU3RhbGUpIHtcbiAgICAgICAgYXdhaXQgcHJvdmlkZXIuZGlzY29ubmVjdCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSBubyBhY3RpdmUgc2Vzc2lvbiwgb3IgdGhlIGNoYWlucyBhcmUgc3RhbGUsIGNvbm5lY3QuXG4gICAgICBpZiAoIXByb3ZpZGVyLnNlc3Npb24gfHwgaXNDaGFpbnNTdGFsZSkge1xuICAgICAgICBjb25zdCBvcHRpb25hbENoYWlucyA9IHRoaXMuZmlsdGVyZWRDaGFpbnMuZmlsdGVyKGNoYWluID0+IGNoYWluLmNoYWluSWQgIT09IHRhcmdldENoYWluSWQpLm1hcChvcHRpb25hbENoYWluID0+IG9wdGlvbmFsQ2hhaW4uY2hhaW5JZCk7XG4gICAgICAgIHRoaXMuZW1pdChcIm1lc3NhZ2VcIiwge1xuICAgICAgICAgIHR5cGU6IFwiY29ubmVjdGluZ1wiXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBwcm92aWRlci5jb25uZWN0KHtcbiAgICAgICAgICBwYWlyaW5nVG9waWMsXG4gICAgICAgICAgY2hhaW5zOiBbdGFyZ2V0Q2hhaW5JZF0sXG4gICAgICAgICAgb3B0aW9uYWxDaGFpbnM6IG9wdGlvbmFsQ2hhaW5zLmxlbmd0aCA+IDAgPyBvcHRpb25hbENoYWlucyA6IFt0YXJnZXRDaGFpbklkXVxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzMikuY2FsbCh0aGlzLCB0aGlzLmZpbHRlcmVkQ2hhaW5zLm1hcChfcmVmID0+IHtcbiAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgY2hhaW5JZFxuICAgICAgICAgIH0gPSBfcmVmO1xuICAgICAgICAgIHJldHVybiBjaGFpbklkO1xuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHNlc3Npb24gZXhpc3RzIGFuZCBjaGFpbnMgYXJlIGF1dGhvcml6ZWQsIGVuYWJsZSBwcm92aWRlciBmb3IgcmVxdWlyZWQgY2hhaW5cbiAgICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgcHJvdmlkZXIuZW5hYmxlKCk7XG4gICAgICBpZiAoIWFjY291bnRzWzBdKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjY291bnRzIGZvdW5kIG9uIHByb3ZpZGVyLlwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjY291bnQgPSB1dGlscy5nZXRBZGRyZXNzKGFjY291bnRzWzBdKTtcbiAgICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5nZXRDaGFpbklkKCk7XG4gICAgICBjb25zdCB1bnN1cHBvcnRlZCA9IHRoaXMuaXNDaGFpblVuc3VwcG9ydGVkKGlkKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjY291bnQsXG4gICAgICAgIGNoYWluOiB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdW5zdXBwb3J0ZWRcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZXI6IG5ldyBwcm92aWRlcnMuV2ViM1Byb3ZpZGVyKHByb3ZpZGVyKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKC91c2VyIHJlamVjdGVkL2kudGVzdChlcnJvcj8ubWVzc2FnZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZGlzY29ubmVjdCgpIHtcbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIndjQDJcIikpIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjbGVhbnVwKCk7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKCk7XG4gICAgY29uc3QgZGlzY29ubmVjdFByb3ZpZGVyID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcHJvdmlkZXIuZGlzY29ubmVjdCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKCEvTm8gbWF0Y2hpbmcga2V5L2kudGVzdChlcnJvci5tZXNzYWdlKSkge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9yZW1vdmVMaXN0ZW5lcnMsIF9yZW1vdmVMaXN0ZW5lcnMyKS5jYWxsKHRoaXMpO1xuICAgICAgICBhd2FpdCBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMsIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMyKS5jYWxsKHRoaXMsIFtdKTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgZGlzY29ubmVjdFByb3ZpZGVyKCk7XG4gIH1cbiAgYXN5bmMgZ2V0QWNjb3VudCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBhY2NvdW50c1xuICAgIH0gPSBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKCk7XG4gICAgaWYgKCFhY2NvdW50c1swXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWNjb3VudHMgZm91bmQgb24gcHJvdmlkZXIuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdXRpbHMuZ2V0QWRkcmVzcyhhY2NvdW50c1swXSk7XG4gIH1cbiAgYXN5bmMgZ2V0Q2hhaW5JZCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBjaGFpbklkXG4gICAgfSA9IGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoKTtcbiAgICByZXR1cm4gY2hhaW5JZDtcbiAgfVxuICBhc3luYyBnZXRQcm92aWRlcigpIHtcbiAgICBsZXQge1xuICAgICAgY2hhaW5JZFxuICAgIH0gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGlmICghX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikpIHtcbiAgICAgIGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2NyZWF0ZVByb3ZpZGVyLCBfY3JlYXRlUHJvdmlkZXIyKS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBpZiAoY2hhaW5JZCkge1xuICAgICAgYXdhaXQgdGhpcy5zd2l0Y2hDaGFpbihjaGFpbklkKTtcbiAgICB9XG4gICAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcHJvdmlkZXIgZm91bmQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcik7XG4gIH1cbiAgYXN5bmMgZ2V0U2lnbmVyKCkge1xuICAgIGxldCB7XG4gICAgICBjaGFpbklkXG4gICAgfSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgY29uc3QgW3Byb3ZpZGVyLCBhY2NvdW50XSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmdldFByb3ZpZGVyKHtcbiAgICAgIGNoYWluSWRcbiAgICB9KSwgdGhpcy5nZXRBY2NvdW50KCldKTtcbiAgICByZXR1cm4gbmV3IHByb3ZpZGVycy5XZWIzUHJvdmlkZXIocHJvdmlkZXIsIGNoYWluSWQpLmdldFNpZ25lcihhY2NvdW50KTtcbiAgfVxuICBhc3luYyBpc0F1dGhvcml6ZWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFthY2NvdW50LCBwcm92aWRlcl0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5nZXRBY2NvdW50KCksIHRoaXMuZ2V0UHJvdmlkZXIoKV0pO1xuICAgICAgY29uc3QgaXNDaGFpbnNTdGFsZSA9IGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2lzQ2hhaW5zU3RhbGUsIF9pc0NoYWluc1N0YWxlMikuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgYW4gYWNjb3VudCBkb2VzIG5vdCBleGlzdCBvbiB0aGUgc2Vzc2lvbiwgdGhlbiB0aGUgY29ubmVjdG9yIGlzIHVuYXV0aG9yaXplZC5cbiAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBjaGFpbnMgYXJlIHN0YWxlIG9uIHRoZSBzZXNzaW9uLCB0aGVuIHRoZSBjb25uZWN0b3IgaXMgdW5hdXRob3JpemVkLlxuICAgICAgaWYgKGlzQ2hhaW5zU3RhbGUgJiYgcHJvdmlkZXIuc2Vzc2lvbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfSBjYXRjaCB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzd2l0Y2hDaGFpbihjaGFpbklkKSB7XG4gICAgY29uc3QgY2hhaW4gPSB0aGlzLmNoYWlucy5maW5kKGNoYWluXyA9PiBjaGFpbl8uY2hhaW5JZCA9PT0gY2hhaW5JZCk7XG4gICAgaWYgKCFjaGFpbikge1xuICAgICAgdGhyb3cgbmV3IFN3aXRjaENoYWluRXJyb3IoYENoYWluIHdpdGggSUQ6ICR7Y2hhaW5JZH0sIG5vdCBmb3VuZCBvbiBjb25uZWN0b3IuYCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoKTtcbiAgICAgIGNvbnN0IG5hbWVzcGFjZUNoYWlucyA9IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2dldE5hbWVzcGFjZUNoYWluc0lkcywgX2dldE5hbWVzcGFjZUNoYWluc0lkczIpLmNhbGwodGhpcyk7XG4gICAgICBjb25zdCBuYW1lc3BhY2VNZXRob2RzID0gX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfZ2V0TmFtZXNwYWNlTWV0aG9kcywgX2dldE5hbWVzcGFjZU1ldGhvZHMyKS5jYWxsKHRoaXMpO1xuICAgICAgY29uc3QgaXNDaGFpbkFwcHJvdmVkID0gbmFtZXNwYWNlQ2hhaW5zLmluY2x1ZGVzKGNoYWluSWQpO1xuICAgICAgaWYgKCFpc0NoYWluQXBwcm92ZWQgJiYgbmFtZXNwYWNlTWV0aG9kcy5pbmNsdWRlcyhBRERfRVRIX0NIQUlOX01FVEhPRCkpIHtcbiAgICAgICAgY29uc3QgZmlyc3RFeHBsb3JlciA9IGNoYWluLmV4cGxvcmVycyAmJiBjaGFpbi5leHBsb3JlcnNbMF07XG4gICAgICAgIGNvbnN0IGJsb2NrRXhwbG9yZXJVcmxzID0gZmlyc3RFeHBsb3JlciA/IHtcbiAgICAgICAgICBibG9ja0V4cGxvcmVyVXJsczogW2ZpcnN0RXhwbG9yZXIudXJsXVxuICAgICAgICB9IDoge307XG4gICAgICAgIGF3YWl0IHByb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICAgIG1ldGhvZDogQUREX0VUSF9DSEFJTl9NRVRIT0QsXG4gICAgICAgICAgcGFyYW1zOiBbe1xuICAgICAgICAgICAgY2hhaW5JZDogdXRpbHMuaGV4VmFsdWUoY2hhaW4uY2hhaW5JZCksXG4gICAgICAgICAgICBjaGFpbk5hbWU6IGNoYWluLm5hbWUsXG4gICAgICAgICAgICBuYXRpdmVDdXJyZW5jeTogY2hhaW4ubmF0aXZlQ3VycmVuY3ksXG4gICAgICAgICAgICBycGNVcmxzOiBnZXRWYWxpZFB1YmxpY1JQQ1VybChjaGFpbiksXG4gICAgICAgICAgICAvLyBubyBjbGllbnRJZCBvbiBwdXJwb3NlXG4gICAgICAgICAgICAuLi5ibG9ja0V4cGxvcmVyVXJsc1xuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRDaGFpbnMgPSBhd2FpdCBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9nZXRSZXF1ZXN0ZWRDaGFpbnNJZHMsIF9nZXRSZXF1ZXN0ZWRDaGFpbnNJZHMyKS5jYWxsKHRoaXMpO1xuICAgICAgICByZXF1ZXN0ZWRDaGFpbnMucHVzaChjaGFpbklkKTtcbiAgICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzMikuY2FsbCh0aGlzLCByZXF1ZXN0ZWRDaGFpbnMpO1xuICAgICAgfVxuICAgICAgYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgIG1ldGhvZDogXCJ3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpblwiLFxuICAgICAgICBwYXJhbXM6IFt7XG4gICAgICAgICAgY2hhaW5JZDogdXRpbHMuaGV4VmFsdWUoY2hhaW5JZClcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNoYWluO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdHlwZW9mIGVycm9yID09PSBcInN0cmluZ1wiID8gZXJyb3IgOiBlcnJvcj8ubWVzc2FnZTtcbiAgICAgIGlmICgvdXNlciByZWplY3RlZCByZXF1ZXN0L2kudGVzdChtZXNzYWdlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBTd2l0Y2hDaGFpbkVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2V0dXBMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9yZW1vdmVMaXN0ZW5lcnMsIF9yZW1vdmVMaXN0ZW5lcnMyKS5jYWxsKHRoaXMpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLm9uKFwiYWNjb3VudHNDaGFuZ2VkXCIsIHRoaXMub25BY2NvdW50c0NoYW5nZWQpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLm9uKFwiY2hhaW5DaGFuZ2VkXCIsIHRoaXMub25DaGFpbkNoYW5nZWQpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLm9uKFwiZGlzY29ubmVjdFwiLCB0aGlzLm9uRGlzY29ubmVjdCk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikub24oXCJzZXNzaW9uX2RlbGV0ZVwiLCB0aGlzLm9uRGlzY29ubmVjdCk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikub24oXCJkaXNwbGF5X3VyaVwiLCB0aGlzLm9uRGlzcGxheVVyaSk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikub24oXCJjb25uZWN0XCIsIHRoaXMub25Db25uZWN0KTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gX2NyZWF0ZVByb3ZpZGVyMigpIHtcbiAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2luaXRQcm92aWRlclByb21pc2UpICYmIFwib2JqZWN0XCIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2luaXRQcm92aWRlclByb21pc2UsIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2luaXRQcm92aWRlciwgX2luaXRQcm92aWRlcjIpLmNhbGwodGhpcykpO1xuICB9XG4gIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2luaXRQcm92aWRlclByb21pc2UpO1xufVxuYXN5bmMgZnVuY3Rpb24gX2luaXRQcm92aWRlcjIoKSB7XG4gIGNvbnN0IHtcbiAgICBkZWZhdWx0OiBFdGhlcmV1bVByb3ZpZGVyLFxuICAgIE9QVElPTkFMX0VWRU5UUyxcbiAgICBPUFRJT05BTF9NRVRIT0RTXG4gIH0gPSBhd2FpdCBpbXBvcnQoJ0B3YWxsZXRjb25uZWN0L2V0aGVyZXVtLXByb3ZpZGVyJyk7XG4gIGNvbnN0IFtkZWZhdWx0Q2hhaW4sIC4uLm9wdGlvbmFsQ2hhaW5zXSA9IHRoaXMuZmlsdGVyZWRDaGFpbnMubWFwKF9yZWYyID0+IHtcbiAgICBsZXQge1xuICAgICAgY2hhaW5JZFxuICAgIH0gPSBfcmVmMjtcbiAgICByZXR1cm4gY2hhaW5JZDtcbiAgfSk7XG4gIGlmIChkZWZhdWx0Q2hhaW4pIHtcbiAgICAvLyBFdGhlcmV1bVByb3ZpZGVyIHBvcHVsYXRlcyAmIGRlZHVwbGljYXRlcyByZXF1aXJlZCBtZXRob2RzIGFuZCBldmVudHMgaW50ZXJuYWxseVxuICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfcHJvdmlkZXIsIGF3YWl0IEV0aGVyZXVtUHJvdmlkZXIuaW5pdCh7XG4gICAgICBzaG93UXJNb2RhbDogdGhpcy5vcHRpb25zLnFyY29kZSAhPT0gZmFsc2UsXG4gICAgICBwcm9qZWN0SWQ6IHRoaXMub3B0aW9ucy5wcm9qZWN0SWQsXG4gICAgICBvcHRpb25hbE1ldGhvZHM6IE9QVElPTkFMX01FVEhPRFMsXG4gICAgICBvcHRpb25hbEV2ZW50czogT1BUSU9OQUxfRVZFTlRTLFxuICAgICAgY2hhaW5zOiBbZGVmYXVsdENoYWluXSxcbiAgICAgIG9wdGlvbmFsQ2hhaW5zOiBvcHRpb25hbENoYWlucyxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG5hbWU6IHRoaXMub3B0aW9ucy5kYXBwTWV0YWRhdGEubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMub3B0aW9ucy5kYXBwTWV0YWRhdGEuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgdXJsOiB0aGlzLm9wdGlvbnMuZGFwcE1ldGFkYXRhLnVybCxcbiAgICAgICAgaWNvbnM6IFt0aGlzLm9wdGlvbnMuZGFwcE1ldGFkYXRhLmxvZ29VcmwgfHwgXCJcIl1cbiAgICAgIH0sXG4gICAgICBycGNNYXA6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmZpbHRlcmVkQ2hhaW5zLm1hcChjaGFpbiA9PiBbY2hhaW4uY2hhaW5JZCwgY2hhaW4ucnBjWzBdIHx8IFwiXCIgLy8gVE9ETzogaGFuZGxlIGNoYWluLnJwYyBiZWluZyBlbXB0eSBhcnJheVxuICAgICAgXSkpLFxuXG4gICAgICBxck1vZGFsT3B0aW9uczogdGhpcy5vcHRpb25zLnFyTW9kYWxPcHRpb25zXG4gICAgfSkpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBfaXNDaGFpbnNTdGFsZTIoKSB7XG4gIGNvbnN0IG5hbWVzcGFjZU1ldGhvZHMgPSBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9nZXROYW1lc3BhY2VNZXRob2RzLCBfZ2V0TmFtZXNwYWNlTWV0aG9kczIpLmNhbGwodGhpcyk7XG4gIGlmIChuYW1lc3BhY2VNZXRob2RzLmluY2x1ZGVzKEFERF9FVEhfQ0hBSU5fTUVUSE9EKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIXRoaXMub3B0aW9ucy5pc05ld0NoYWluc1N0YWxlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHJlcXVlc3RlZENoYWlucyA9IGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2dldFJlcXVlc3RlZENoYWluc0lkcywgX2dldFJlcXVlc3RlZENoYWluc0lkczIpLmNhbGwodGhpcyk7XG4gIGNvbnN0IGNvbm5lY3RvckNoYWlucyA9IHRoaXMuZmlsdGVyZWRDaGFpbnMubWFwKF9yZWYzID0+IHtcbiAgICBsZXQge1xuICAgICAgY2hhaW5JZFxuICAgIH0gPSBfcmVmMztcbiAgICByZXR1cm4gY2hhaW5JZDtcbiAgfSk7XG4gIGNvbnN0IG5hbWVzcGFjZUNoYWlucyA9IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2dldE5hbWVzcGFjZUNoYWluc0lkcywgX2dldE5hbWVzcGFjZUNoYWluc0lkczIpLmNhbGwodGhpcyk7XG4gIGlmIChuYW1lc3BhY2VDaGFpbnMubGVuZ3RoICYmICFuYW1lc3BhY2VDaGFpbnMuc29tZShpZCA9PiBjb25uZWN0b3JDaGFpbnMuaW5jbHVkZXMoaWQpKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gIWNvbm5lY3RvckNoYWlucy5ldmVyeShpZCA9PiByZXF1ZXN0ZWRDaGFpbnMuaW5jbHVkZXMoaWQpKTtcbn1cbmZ1bmN0aW9uIF9yZW1vdmVMaXN0ZW5lcnMyKCkge1xuICBpZiAoIV9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLnJlbW92ZUxpc3RlbmVyKFwiYWNjb3VudHNDaGFuZ2VkXCIsIHRoaXMub25BY2NvdW50c0NoYW5nZWQpO1xuICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKS5yZW1vdmVMaXN0ZW5lcihcImNoYWluQ2hhbmdlZFwiLCB0aGlzLm9uQ2hhaW5DaGFuZ2VkKTtcbiAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikucmVtb3ZlTGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIHRoaXMub25EaXNjb25uZWN0KTtcbiAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikucmVtb3ZlTGlzdGVuZXIoXCJzZXNzaW9uX2RlbGV0ZVwiLCB0aGlzLm9uRGlzY29ubmVjdCk7XG4gIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLnJlbW92ZUxpc3RlbmVyKFwiZGlzcGxheV91cmlcIiwgdGhpcy5vbkRpc3BsYXlVcmkpO1xuICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKS5yZW1vdmVMaXN0ZW5lcihcImNvbm5lY3RcIiwgdGhpcy5vbkNvbm5lY3QpO1xufVxuYXN5bmMgZnVuY3Rpb24gX3NldFJlcXVlc3RlZENoYWluc0lkczIoY2hhaW5zKSB7XG4gIGF3YWl0IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfc3RvcmFnZSkuc2V0SXRlbShSRVFVRVNURURfQ0hBSU5TX0tFWSwgSlNPTi5zdHJpbmdpZnkoY2hhaW5zKSk7XG59XG5hc3luYyBmdW5jdGlvbiBfZ2V0UmVxdWVzdGVkQ2hhaW5zSWRzMigpIHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfc3RvcmFnZSkuZ2V0SXRlbShSRVFVRVNURURfQ0hBSU5TX0tFWSk7XG4gIHJldHVybiBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IFtdO1xufVxuZnVuY3Rpb24gX2dldE5hbWVzcGFjZUNoYWluc0lkczIoKSB7XG4gIGlmICghX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgY2hhaW5JZHMgPSBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKS5zZXNzaW9uPy5uYW1lc3BhY2VzW05BTUVTUEFDRV0/LmNoYWlucz8ubWFwKGNoYWluID0+IHBhcnNlSW50KGNoYWluLnNwbGl0KFwiOlwiKVsxXSB8fCBcIlwiKSk7XG4gIHJldHVybiBjaGFpbklkcyA/PyBbXTtcbn1cbmZ1bmN0aW9uIF9nZXROYW1lc3BhY2VNZXRob2RzMigpIHtcbiAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBtZXRob2RzID0gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikuc2Vzc2lvbj8ubmFtZXNwYWNlc1tOQU1FU1BBQ0VdPy5tZXRob2RzO1xuICByZXR1cm4gbWV0aG9kcyA/PyBbXTtcbn1cblxuZXhwb3J0IHsgV2FsbGV0Q29ubmVjdENvbm5lY3RvciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@thirdweb-dev/wallets/evm/connectors/wallet-connect/dist/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.js\n"));

/***/ })

}]);